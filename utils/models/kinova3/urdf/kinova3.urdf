<?xml version="1.0" encoding="utf-8"?>
<robot name="kinova3">

  <!-- The world link is necessary for fixed-base systems -->
  <link name="world"/>
  
  <!-- Base -->
  <link name="kinova3_base_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/base_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0 0.078215"/>
      <geometry>
        <cylinder length="0.15643" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <!-- Dummy inertia link, because KDL cannot have inertia on the base link -->
  <link name="kinova3_base_link_inertia">
    <inertial>
      <mass value="1.697353"/>
      <origin rpy="0 0 0" xyz="-0.000648 -0.000166 0.084487"/>
      <inertia ixx="0.004622" ixy="9E-06" ixz="6E-05" iyy="0.004495" iyz="9E-06" izz="0.002079"/>
    </inertial>
  </link>
  <!-- Fixed joint to add dummy inertia link -->
  <joint name="kinova3_base_link_to_kinova3_base_link_inertia" type="fixed">
    <parent link="kinova3_base_link"/>
    <child link="kinova3_base_link_inertia"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <!-- Fixed joint to the world -->
  <joint name="kinova3_joint_base" type="fixed">
    <parent link="world"/>
    <child link="kinova3_base_link"/>
    <axis xyz="0 0 0"/>
    <limit effort="1000" lower="0" upper="0" velocity="15"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  
  <!-- First link -->
  <link name="kinova3_shoulder_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-2.3E-05 -0.010364 -0.07336"/>
      <mass value="1.377353"/>
      <inertia ixx="0.00457" ixy="1E-06" ixz="2E-06" iyy="0.004831" iyz="0.000448" izz="0.001409"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/shoulder_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0 -0.06419"/>
      <geometry>
        <box size="0.1 0.1 0.12838"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.025 -0.12838"/>
      <geometry>
        <cylinder length="0.05" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_1" type="revolute">
    <origin rpy="-3.1416 3.2891E-18 1.9637E-50" xyz="6.1995E-05 0 0.15643"/>
    <parent link="kinova3_base_link"/>
    <child link="kinova3_shoulder_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="39" lower="-20" upper="20" velocity="0.8727"/>
  </joint>
  
  <!-- Second link -->
  <link name="kinova3_half_arm_1_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-4.4E-05 -0.09958 -0.013278"/>
      <mass value="1.163667"/>
      <inertia ixx="0.011088" ixy="5E-06" ixz="0" iyy="0.001072" iyz="-0.000691" izz="0.011255"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/half_arm_1_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.10519 -0.006375"/>
      <geometry>
        <cylinder length="0.21038" radius="0.05"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.0275"/>
      <geometry>
        <cylinder length="0.055" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_2" type="revolute">
    <origin rpy="1.5708 2.4106E-17 3.1919E-16" xyz="0 0.005375 -0.12838"/>
    <parent link="kinova3_shoulder_link"/>
    <child link="kinova3_half_arm_1_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="39" lower="-2.2" upper="2.2" velocity="0.8727"/>
  </joint>
  
  <!-- Third link -->
  <link name="kinova3_half_arm_2_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-4.4E-05 -0.006641 -0.117892"/>
      <mass value="1.16366"/>
      <inertia ixx="0.010932" ixy="0" ixz="-7E-06" iyy="0.011127" iyz="0.000606" izz="0.001043"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/half_arm_2_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.10519"/>
      <geometry>
        <cylinder length="0.21038" radius="0.05"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.025 -0.21038"/>
      <geometry>
        <cylinder length="0.05" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_3" type="revolute">
    <origin rpy="-1.5708 9.8608E-32 -2.7983E-16" xyz="0 -0.21038 -0.006375"/>
    <parent link="kinova3_half_arm_1_link"/>
    <child link="kinova3_half_arm_2_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="39" lower="-20" upper="20" velocity="0.8727"/>
  </joint>
  
  <!-- Fourth link -->
  <link name="kinova3_forearm_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-1.8E-05 -0.075478 -0.015006"/>
      <mass value="0.930287"/>
      <inertia ixx="0.008147" ixy="-1E-06" ixz="0" iyy="0.000631" iyz="-0.0005" izz="0.008316"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/forearm_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.10519 -0.006375"/>
      <geometry>
        <cylinder length="0.21038" radius="0.05"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.0275"/>
      <geometry>
        <cylinder length="0.055" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_4" type="revolute">
    <origin rpy="1.5708 3.0688E-17 -6.9389E-18" xyz="0 0.006375 -0.21038"/>
    <parent link="kinova3_half_arm_2_link"/>
    <child link="kinova3_forearm_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="39" lower="-2.5656" upper="2.5656" velocity="0.8727"/>
  </joint>
  
  <!-- Fifth link -->
  <link name="kinova3_spherical_wrist_1_link">
    <inertial>
      <origin rpy="0 0 0" xyz="1E-06 -0.009432 -0.063883"/>
      <mass value="0.678106"/>
      <inertia ixx="0.001596" ixy="0" ixz="0" iyy="0.001607" iyz="0.000256" izz="0.000399"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/spherical_wrist_1_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.052965"/>
      <geometry>
        <cylinder length="0.10593" radius="0.05"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.0275 -0.10593"/>
      <geometry>
        <cylinder length="0.055" radius="0.04"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_5" type="revolute">
    <origin rpy="-1.5708 1.497E-17 7.6501E-17" xyz="0 -0.20843 -0.006375"/>
    <parent link="kinova3_forearm_link"/>
    <child link="kinova3_spherical_wrist_1_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="9" lower="-20" upper="20" velocity="0.8727"/>
  </joint>
  
  <!-- Sixth link -->
  <link name="kinova3_spherical_wrist_2_link">
    <inertial>
      <origin rpy="0 0 0" xyz="1E-06 -0.045483 -0.00965"/>
      <mass value="0.678106"/>
      <inertia ixx="0.001641" ixy="0" ixz="0" iyy="0.00041" iyz="-0.000278" izz="0.001641"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/spherical_wrist_2_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 0 " xyz="0 -0.052965 -0.00017505"/>
      <geometry>
        <cylinder length="0.10593" radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.0275"/>
      <geometry>
        <cylinder length="0.055" radius="0.04"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_6" type="revolute">
    <origin rpy="1.5708 3.3255E-17 -8.0962E-15" xyz="0 0.00017505 -0.10593"/>
    <parent link="kinova3_spherical_wrist_1_link"/>
    <child link="kinova3_spherical_wrist_2_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="9" lower="-2.05" upper="2.05" velocity="0.8727"/>
  </joint>
  
  <!-- Seventh link -->
  <link name="kinova3_bracelet_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.000281 -0.011402 -0.03108"/>
      <mass value="0.500657"/>
      <inertia ixx="0.00057" ixy="2E-06" ixz="3E-06" iyy="0.000352" iyz="0.000111" izz="0.000609"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="../meshes/bracelet_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0 0.0 -0.0357625"/>
      <geometry>
        <cylinder length="0.071525" radius="0.04"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0 " xyz="0.0 -0.055 -0.055"/>
      <geometry>
        <box size="0.1 0.05 0.03"/>
      </geometry>
    </collision>
  </link>
  <joint name="kinova3_joint_7" type="revolute">
    <origin rpy="-1.5708 -2.3419E-17 1.52E-17" xyz="0 -0.10593 -0.00017505"/>
    <parent link="kinova3_spherical_wrist_2_link"/>
    <child link="kinova3_bracelet_link"/>
    <axis xyz="0 0 1"/>
    <limit effort="9" lower="-20" upper="20" velocity="0.8727"/>
  </joint>
  
  <!-- End-Effector virtual links used to define accessible frames -->
  <link name="kinova3_end_effector_link"/>
  <joint name="kinova3_end_effector" type="fixed">
    <origin rpy="3.1416 1.0815E-32 0" xyz="0 0 -0.061525"/>
    <parent link="kinova3_bracelet_link"/>
    <child link="kinova3_end_effector_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="end_effector_target"/>
  <joint name="kinova3_end_effector_link_to_end_effector" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="kinova3_end_effector_link"/>
    <child link="end_effector_target"/>
    <axis xyz="0 0 0"/>
  </joint>
  
</robot>
